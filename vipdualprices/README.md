# Dual Price Display Module for PrestaShop

This module adds an informative secondary price to your PrestaShop store. It is
designed specifically for shops trading in Bulgarian lev (BGN) and euro (EUR),
and it displays prices in both currencies using a fixed conversion rate. The
secondary price is for information only and does not affect the actual order
total or payment currency.

## Features

* **Primary/secondary currency toggle** – choose whether BGN or EUR should be
  considered the base currency. The module will automatically calculate the
  secondary amount using the fixed rate defined in the configuration.
* **Fixed conversion rate** – define the rate used when converting between
  currencies (default is 1 BGN = 1 / 1.95583 EUR). No external API calls are
  made.
* **Configurable display** – enable or disable secondary prices on product
  pages and listings, in the order confirmation page, and in outgoing emails.
  Choose whether the secondary price appears in parentheses or separated by a
  vertical bar.
* **Hook‑based implementation** – the module relies on core hooks such as
  `displayProductPriceBlock` and `sendMailAlterTemplateVars`, so it integrates
  cleanly with your theme and PrestaShop core. It avoids editing core files or
  injecting JavaScript hacks.

## Installation

1. Copy the `vipdualprices` directory into your shop’s `modules/` directory.
2. Navigate to _Modules &amp; Services_ in the PrestaShop back office.
3. Locate **Dual Price Display (BGN/EUR)** and click **Install**.
4. After installation, click **Configure** to adjust the settings.

## Configuration

From the module configuration page you can:

* Select the primary currency (BGN or EUR).
* Enable or disable the secondary price display globally.
* Set the conversion rate between BGN and EUR.
* Choose the display format (`Primary (Secondary)` or `Primary | Secondary`).
* Toggle where the secondary price is visible:
  * **Products &amp; listings** – shows secondary price next to product prices on
    product pages, category lists and other price blocks.
  * **Order confirmation page** – appends the total in the secondary currency
    after an order is placed.
  * **Emails** – exposes additional template variables (see below) so you can
    display secondary totals in order confirmation emails.

## Email templates

When the email toggle is enabled the module adds a set of variables to each
email sent via `Mail::send()`【525733741268901†L623-L650】. You can use these variables in your mail
templates (for example in `mails/en/order_conf.html`):

| Variable               | Description                            |
|------------------------|----------------------------------------|
| `{TOTAL_PAID_SECONDARY}`     | Total paid in secondary currency      |
| `{TOTAL_PRODUCTS_SECONDARY}` | Total products cost in secondary currency |
| `{TOTAL_SHIPPING_SECONDARY}` | Shipping total in secondary currency  |
| `{TOTAL_TAX_SECONDARY}`      | Total tax in secondary currency        |
| `{TOTAL_DISCOUNTS_SECONDARY}`| Total discounts in secondary currency   |

Example usage in `order_conf.html`:

```html
{total_paid} <span style="color:#666;">({TOTAL_PAID_SECONDARY})</span>
```

## Removing the module

To disable the dual price display simply disable the module from the back
office. Uninstalling the module removes all configuration values and the
secondary prices will disappear instantly.

## Limitations

The module uses the product’s base price as provided by the theme via
`displayProductPriceBlock`【189176077400771†L621-L633】. Some custom themes may compute prices differently or
render price blocks without this hook; in such cases the secondary price may not
appear everywhere. The Warehouse theme used in the shop for which this module
was designed supports this hook, but if you encounter pages where the secondary
price does not show, please ensure that the theme calls
`{hook h='displayProductPriceBlock' ...}` around the price output.

## Author

This module was generated by ChatGPT in response to a detailed brief. Feel free
to adapt it to suit your specific needs.